<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Steven E. Finkel üìß finkel@pitt.edu">

<title>Maximum Likelihood Estimation: Categorical and Limited Dependent Variables</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./syllabus.html">Syllabus</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./images/ps2730_logo-modified.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./syllabus.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./materials.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Materials</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://finkel-s.github.io/teaching.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Other Courses</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#course-description" id="toc-course-description" class="nav-link active" data-scroll-target="#course-description">Course Description</a></li>
  <li><a href="#texts" id="toc-texts" class="nav-link" data-scroll-target="#texts">Texts</a></li>
  <li><a href="#supplemental-references" id="toc-supplemental-references" class="nav-link" data-scroll-target="#supplemental-references">Supplemental References</a></li>
  <li><a href="#course-requirements" id="toc-course-requirements" class="nav-link" data-scroll-target="#course-requirements">Course Requirements</a></li>
  <li><a href="#course-outline" id="toc-course-outline" class="nav-link" data-scroll-target="#course-outline">Course Outline</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Maximum Likelihood Estimation: Categorical and Limited Dependent Variables</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p><a href="https://finkel-s.github.io/about.html" target="_blank"><strong>Steven E. Finkel</strong></a><br><a href="mailto:finkel@pitt.edu">üìß finkel@pitt.edu</a> </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="course-description" class="level2">
<h2 data-anchor-id="course-description">Course Description</h2>
<div class="justify-text">
<p>This course focuses on models for the analysis of categorical and other kinds of non-continuous dependent variables, which are typically estimated via maximum likelihood estimation methods. We will begin with logit and probit models for binary outcomes (e.g.&nbsp;individuals voting or abstaining in an election) and link those models to the broader ‚Äúgeneralized linear model‚Äù framework. We‚Äôll then cover maximum likelihood methods for estimating parameters in logit and probit (and many other) models, and discuss recent issues and problems in the specification, estimation and interpretation of these models. We‚Äôll then move on to models for other common non-continuous dependent variables: <em>ordinal outcomes</em> (e.g., regimes being ‚Äúrepressive,‚Äù ‚Äúsemi-repressive,‚Äù or ‚Äúfree‚Äù); <em>nominal outcomes</em> with more than two unordered categories (e.g.&nbsp;voting for a ‚ÄúLeft‚Äù, ‚ÄúRight‚Äù, ‚ÄúPopulist‚Äù or ‚ÄúGreen‚Äù party); <em>count outcomes</em>, e.g.&nbsp;the number of vetoes exercised by Presidents during a given term in office; and <em>censored outcomes</em>, where the values of observations above or below a certain point are unknown (e.g.&nbsp;‚Äúdesired‚Äù campaign contributions where the observed amount is legally capped at a certain value). We will then consider models for categorical and limited variables in multilevel or longitudinal data structures (e.g., multiple observations over time for the same individuals, or multiple individuals observed in different countries). The final unit will cover methods that attempt to handle the problems of <em>endogenous regressor</em> and <em>sample-selection biases</em> in order to estimate causal effects in models for non-continuous outcomes.</p>
<p>The goals of the class are for you to be able to use these methods in your own research, and to understand and critique published works in the discipline that make use of these techniques.</p>
</div>
</section>
<section id="texts" class="level2">
<h2 data-anchor-id="texts">Texts</h2>
<div class="justify-text">
<ul>
<li>Long, J. Scott. 1997. <em>Regression Models for Categorical and Limited Dependent Variables</em>. Sage Publications, Inc.</li>
<li>Long, J. Scott and Jeremy Freese. 2014. <em>Regression Models for Categorical Dependent Variables Using Stata</em>. 3rd Edition. Stata Press.</li>
</ul>
</div>
</section>
<section id="supplemental-references" class="level2">
<h2 data-anchor-id="supplemental-references">Supplemental References</h2>
<div class="justify-text">
<ul>
<li>Allison, Paul D. 2009. <em>Fixed Effects Regression Models</em>. Sage Publications, Inc.</li>
<li>Breen, Richard. 1996. <em>Regression Models: Censored, Sample Selected or Truncated Data</em>. Sage Publications, Inc.</li>
<li>Liao, Tim Futing. 1994. <em>Interpreting Probability Models: Logit, Probit and Other Generalized Linear Models</em>. Sage Publications, Inc.</li>
<li>Rabe-Hesketh, Sophia, and Anders Skrondal. 2012. <em>Multilevel and Longitudinal Modeling Using Stata, Volume II: Categorical Responses, Counts, and Survival</em>. 3rd Edition. Stata Press.</li>
<li>Gill, Jeff and Michelle Torres. 2020. <em>Generalized Linear Models: A Unified Approach</em>, 2nd Edition. Sage Publications, Inc.</li>
<li>Ward, Michael D. and John S. Ahlquist. 2018. <em>Maximum Likelihood for Social Science: Strategies for Analysis</em>. Cambridge University Press.</li>
</ul>
</div>
</section>
<section id="course-requirements" class="level2">
<h2 data-anchor-id="course-requirements">Course Requirements</h2>
<div class="justify-text">
<p>Grades will be based on a 20-25 page research paper (40%), two homework exercises which relate to specific statistical methods and problems we will discuss (25% each), and an oral presentation of your research paper (10%). The paper will be a quantitative analysis using methods from this course of data that you will collect or access from social science archives or other sources.</p>
<p>The paper should have some substantive interest to you or be relevant to your studies in the graduate program; ideally, you can think of it as the first draft of a convention paper or possible journal publication. The paper will discuss your basic theoretical framework, your hypotheses, statistical models, results, possible problems with the analysis and what you may have done to correct or account for these problems. It will conclude with a discussion of the relevance of your findings for the general topic and for future research.</p>
</div>
</section>
<section id="course-outline" class="level2">
<h2 data-anchor-id="course-outline">Course Outline</h2>
<div class="justify-text">
<p>The course is organized by units and then topics within units. We will maintain a certain amount of flexibility with the schedule, so that we can spend more time on some topics/units and scale back on others as circumstances warrant.</p>
<section id="unit-1-models-for-dichotomous-dependent-variables" class="level3">
<h3 data-anchor-id="unit-1-models-for-dichotomous-dependent-variables">Unit 1: Models for Dichotomous Dependent Variables</h3>
<section id="logit-probit-and-the-generalized-linear-model" class="level4">
<h4 data-anchor-id="logit-probit-and-the-generalized-linear-model">1. <a href="materials.html#logit-probit-glm">Logit, Probit and the Generalized Linear Model</a></h4>
<ul>
<li>Long, J. Scott. 1997. <em>Regression Models for Categorical and Limited Dependent Variables</em>. Sage. Chapters 1 and 3.&nbsp;</li>
<li>Long, J. Scott and Jeremy Freese. 2014. <em>Regression Models for Categorical Dependent Variables Using Stata</em>. 3rd Edition. Stata Press. Chapter 4.&nbsp;</li>
<li>Fox, John. 2008. <em>Applied Regression Analysis and Generalized Linear Models</em>. 2nd Edition. Sage Publications, Inc.&nbsp;Chapter 15, pp.&nbsp;379‚Äì385.</li>
</ul>
</section>
<section id="maximum-likelihood-estimation-and-interpretation" class="level4">
<h4 data-anchor-id="maximum-likelihood-estimation-and-interpretation">2. <a href="materials.html#ml-estimation-interpretation">Maximum Likelihood: Estimation and Interpretation</a></h4>
<ul>
<li>Long, J. Scott. 1997. <em>Regression Models for Categorical and Limited Dependent Variables</em>. Sage Publications, Inc.&nbsp;Chapters 2 and 4.&nbsp;</li>
<li>Long, J. Scott and Jeremy Freese. 2014. <em>Regression Models for Categorical Dependent Variables Using Stata</em>. 3rd Edition. Stata Press. Chapters 3 and 5.&nbsp;</li>
<li>Fox, John. 2008. <em>Applied Regression Analysis and Generalized Linear Models</em>. 2nd Edition. Sage Publications, Inc.&nbsp;Chapter 15, pp.&nbsp;402‚Äì417.</li>
</ul>
</section>
<section id="issues-in-the-estimation-and-interpretation-of-logit-and-probit-models" class="level4">
<h4 data-anchor-id="issues-in-the-estimation-and-interpretation-of-logit-and-probit-models">3. <a href="materials.html#logit-probit-issues">Issues in the Estimation and Interpretation of Logit and Probit Models</a></h4>
<ul>
<li>Liao, Tim Futing. 1994. <em>Interpreting Probability Models: Logit, Probit and Other Generalized Linear Models</em>. Sage Publications, Inc.&nbsp;Chapters 1‚Äì3.&nbsp;</li>
<li>Long, J. Scott and Jeremy Freese. 2014. <em>Regression Models for Categorical Dependent Variables Using Stata</em>. 3rd Edition. Stata Press. Chapter 6.&nbsp;</li>
<li>Hanmer, Michael J., and Kerem Ozan Kalkan. 2013. ‚ÄúBehind the Curve: Clarifying the Best Approach to Calculating Predicted Probabilities and Marginal Effects from Limited Dependent Variable Models.‚Äù <em>American Journal of Political Science</em> 57(1): 263‚Äì277.&nbsp;</li>
<li>Breen, Richard, Kristian Bernt Karlson, and Anders Holm. 2018. ‚ÄúInterpreting and Understanding Logits, Probits, and Other Nonlinear Probability Models.‚Äù <em>Annual Review of Sociology</em> 44: 39‚Äì54.<br>
</li>
<li>Rainey, Carlisle. 2016. ‚ÄúDealing with Separation in Logistic Regression Models.‚Äù <em>Political Analysis</em> 24(3): 339‚Äì355.</li>
</ul>
</section>
</section>
<section id="unit-2-models-for-ordered-nominal-count-and-censored-variables" class="level3">
<h3 data-anchor-id="unit-2-models-for-ordered-nominal-count-and-censored-variables">Unit 2: Models for Ordered, Nominal, Count, and Censored Variables</h3>
<section id="ordered-outcomes" class="level4">
<h4 data-anchor-id="ordered-outcomes">1. <a href="materials.html#ordered-outcomes">Ordered Outcomes</a></h4>
<ul>
<li>Long, J. Scott. 1997. <em>Regression Models for Categorical and Limited Dependent Variables</em>. Sage. Chapter 5.&nbsp;</li>
<li>Liao, Tim Futing. 1994. <em>Interpreting Probability Models: Logit, Probit and Other Generalized Linear Models</em>. Sage Publications, Inc.&nbsp;Chapter 5.&nbsp;</li>
<li>Long, J. Scott and Jeremy Freese. 2014. <em>Regression Models for Categorical Dependent Variables Using Stata</em>. 3rd Edition. Stata Press. Chapter 7.&nbsp;</li>
<li>Fullerton, Andrew S. 2009. ‚ÄúA Conceptual Framework for Ordered Logistic Regression Models.‚Äù <em>Sociological Methods &amp; Research</em> 38(2): 306‚Äì347.</li>
</ul>
</section>
<section id="nominal-outcomes" class="level4">
<h4 data-anchor-id="nominal-outcomes">2. <a href="materials.html#nominal-outcomes">Nominal Outcomes</a></h4>
<ul>
<li>Long, J. Scott. 1997. <em>Regression Models for Categorical and Limited Dependent Variables</em>. Sage. Chapter 6.&nbsp;</li>
<li>Liao, Tim Futing. 1994. <em>Interpreting Probability Models: Logit, Probit and Other Generalized Linear Models</em>. Sage Publications, Inc.&nbsp;Chapters 6‚Äì7.&nbsp;</li>
<li>Long, J. Scott and Jeremy Freese. 2014. <em>Regression Models for Categorical Dependent Variables Using Stata</em>. 3rd Edition. Stata Press. Chapter 8.</li>
</ul>
</section>
<section id="count-outcomes" class="level4">
<h4 data-anchor-id="count-outcomes">3. <a href="materials.html#count-outcomes">Count Outcomes</a></h4>
<ul>
<li>Long, J. Scott. 1997. <em>Regression Models for Categorical and Limited Dependent Variables</em>. Sage. Chapter 8.&nbsp;</li>
<li>Liao, Tim Futing. 1994. <em>Interpreting Probability Models: Logit, Probit and Other Generalized Linear Models</em>. Sage Publications, Inc.&nbsp;Chapter 8.&nbsp;</li>
<li>Long, J. Scott and Jeremy Freese. 2014. <em>Regression Models for Categorical Dependent Variables Using Stata</em>. 3rd Edition. Stata Press. Chapter 9.&nbsp;</li>
<li>Rabe-Hesketh, Sophia, and Anders Skrondal. 2012. <em>Multilevel and Longitudinal Modeling Using Stata, Volume II: Categorical Responses, Counts, and Survival</em>. 3rd Edition. Stata Press. Chapter 13.</li>
</ul>
</section>
<section id="censored-outcomes" class="level4">
<h4 data-anchor-id="censored-outcomes">4. <a href="materials.html#censored-outcomes">Censored Outcomes</a></h4>
<ul>
<li>Long, J. Scott. 1997. <em>Regression Models for Categorical and Limited Dependent Variables</em>. Sage. Chapter 7, pp.&nbsp;187‚Äì210.<br>
</li>
<li>Breen, Richard. 1996. <em>Regression Models: Censored, Sample Selected or Truncated Data</em>. Sage Publications, Inc.&nbsp;Chapters 1‚Äì2.</li>
</ul>
</section>
</section>
<section id="unit-3-longitudinal-and-multilevel-models" class="level3">
<h3 data-anchor-id="unit-3-longitudinal-and-multilevel-models">Unit 3: Longitudinal and Multilevel Models</h3>
<section id="panel-and-multilevel-models-for-dichotomous-outcomes" class="level4">
<h4 data-anchor-id="panel-and-multilevel-models-for-dichotomous-outcomes">1. <a href="materials.html#panel-multilevel-dichotomous">Panel and Multilevel Models for Dichotomous Outcomes</a></h4>
<ul>
<li>Andre√ü, Hans-J√ºrgen, Katrin Golsch, and Alexander W. Schmidt. 2013. <em>Applied Panel Data Analysis for Economic and Social Surveys</em>. Springer. pp.&nbsp;203‚Äì248.&nbsp;</li>
<li>Allison, Paul D. 2009. <em>Fixed Effects Regression Models</em>. Sage Publications, Inc.&nbsp;Chapters 1‚Äì3.&nbsp;</li>
<li>Rabe-Hesketh, Sophia, and Anders Skrondal. 2012. <em>Multilevel and Longitudinal Modeling Using Stata, Volume II: Categorical Responses, Counts, and Survival</em>. 3rd Edition. Stata Press. Chapter 10.</li>
</ul>
</section>
<section id="panel-and-multilevel-models-for-ordinal-nominal-and-count-outcomes" class="level4">
<h4 data-anchor-id="panel-and-multilevel-models-for-ordinal-nominal-and-count-outcomes">2. <a href="materials.html#panel-multilevel-ordinal">Panel and Multilevel Models for Ordinal, Nominal and Count Outcomes</a></h4>
<ul>
<li>Allison, Paul D. 2009. <em>Fixed Effects Regression Models</em>. Sage Publications, Inc.&nbsp;Chapter 4.<br>
</li>
<li>Rabe-Hesketh, Sophia, and Anders Skrondal. 2012. <em>Multilevel and Longitudinal Modeling Using Stata, Volume II: Categorical Responses, Counts, and Survival</em>. 3rd Edition. Stata Press. Chapters 11‚Äì13.</li>
</ul>
</section>
</section>
<section id="unit-4-endogenous-regressor-and-sample-selection-models" class="level3">
<h3 data-anchor-id="unit-4-endogenous-regressor-and-sample-selection-models">Unit 4: Endogenous Regressor and Sample Selection Models</h3>
<section id="sample-selection-endogenous-regressors-and-endogenous-treatment-effects" class="level4">
<h4 data-anchor-id="sample-selection-endogenous-regressors-and-endogenous-treatment-effects">1. <a href="materials.html#endogeneity-sample-selection">Sample Selection, Endogenous Regressors and Endogenous Treatment Effects</a></h4>
<ul>
<li>Angrist, Joshua D., and J√∂rn-Steffen Pischke. 2009. <em>Mostly Harmless Econometrics: An Empiricist‚Äôs Companion</em>. Princeton University Press. Chapter 4, ‚ÄúInstrumental Variables in Action.‚Äù&nbsp;</li>
<li>Breen, Richard. 1996. <em>Regression Models: Censored, Sample Selected or Truncated Data</em>. Sage Publications, Inc.&nbsp;Chapters 3‚Äì5.&nbsp;</li>
<li>Maydeu-Olivares, Alberto, Dexin Shi, and Amanda J. Fairchild. 2020. ‚ÄúEstimating Causal Effects in Linear Regression Models With Observational Data: The Instrumental Variables Regression Model.‚Äù <em>Psychological Methods</em> 25(2): 243‚Äì258.&nbsp;</li>
<li>Terza, Joseph V., Anirban Basu, and Paul J. Rathouz. 2008. ‚ÄúTwo-stage Residual Inclusion Estimation: Addressing Endogeneity in Health Econometric Modeling.‚Äù <em>Journal of Health Economics</em> 27(3): 531‚Äì543.&nbsp;</li>
<li>StataCorp. 2021. <em>Stata Extended Regression Models Reference Manual: Release 17</em>. College Station, TX: Stata Press. pp.&nbsp;1‚Äì67.</li>
</ul>
</section>
</section>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>